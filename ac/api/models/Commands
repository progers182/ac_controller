<?php

require_once 'DbConn.php';

class Commands extends DbConn {
    private $command;
    private $device_id;

    public function read() {
        $query = 'SELECT * FROM `commands`;';

        $stmt = $this->conn->prepare($query);

        $stmt->execute();

        return $stmt;
    }

    public function read_single() {
        // TODO: Implement read_single() method.
    }


    public function create($data) {
        $query = 'INSERT INTO `commands`
        SET update_time = CURRENT_TIMESTAMP() command = :command, device_id = :device_id;
            ';

        $stmt = $this->conn->prepare($query);

        // clean
        $this->command = htmlspecialchars(strip_tags($data->command));
        $this->device_id = htmlspecialchars(strip_tags($data->device_id));

        // bind
        $stmt->execute([
            ':command' => $this->command,
            ':device_id' => $this->device_id
        ]);
        return true;
    }
}
